{"version":3,"sources":["webpack:///./src/lib/components/DashCookies.react.js"],"names":["DashCookies","props","key","id","data","setItem","setProps","getItem","JSON","stringify","value","document","cookie","max_age","cookies","arr","split","itemStr","item","parse","error","Component","defaultProps","propTypes","PropTypes","string","isRequired","oneOfType","number","array","object","func"],"mappings":"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","file":"f0c6c82-main-wps-hmr.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, {Component} from 'react';\r\n\r\n/**\r\n * ExampleComponent is an example component.\r\n * It takes a property, `label`, and\r\n * displays it.\r\n * It renders an input with the property `value`\r\n * which is editable by the user.\r\n */\r\nexport default class DashCookies extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.key = this.props.id;\r\n    }\r\n\r\n    /**\r\n     * コンポーネントがマウントされる直前に呼ばれる\r\n     */\r\n    componentDidMount() {\r\n        if (this.props.data || this.props.data == 0) {\r\n            // dataがある場合、Cookieに保存\r\n            this.setItem(this.props.data);\r\n        } else {\r\n            // dataが空の場合、Cookieから取得する\r\n            this.props.setProps({data: this.getItem()});\r\n        }\r\n        this.getItem();\r\n    }\r\n\r\n    /**\r\n     * コンポーネントが更新される直前に呼ばれる\r\n     */\r\n    componentDidUpdate() {\r\n        if (\r\n            JSON.stringify(this.props.data) !== JSON.stringify(this.getItem())\r\n        ) {\r\n            this.setItem(this.props.data);\r\n            this.props.setProps(this.getItem());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Cookieにデータを保存\r\n     * @param {*} data\r\n     */\r\n    setItem(data) {\r\n        const value = this.key + '=' + JSON.stringify(data);\r\n        document.cookie = this.props.max_age\r\n            ? value + '; Max-Age=' + this.props.max_age\r\n            : value;\r\n    }\r\n\r\n    /**\r\n     * Cookieからデータを取得\r\n     * @returns\r\n     */\r\n    getItem() {\r\n        const cookies = document.cookie;\r\n        const arr = cookies.split('; ');\r\n        let data;\r\n        for (const itemStr of arr) {\r\n            const item = itemStr.split('=');\r\n            if (item[0] === this.key) {\r\n                data = item[1];\r\n                break;\r\n            }\r\n        }\r\n\r\n        try {\r\n            data = JSON.parse(data);\r\n        } catch (error) {}\r\n        return data;\r\n    }\r\n\r\n    render() {\r\n        const {id} = this.props;\r\n        return <div id={id}></div>;\r\n    }\r\n}\r\n\r\nDashCookies.defaultProps = {};\r\n\r\nDashCookies.propTypes = {\r\n    id: PropTypes.string.isRequired,\r\n    data: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.number,\r\n        PropTypes.array,\r\n        PropTypes.object,\r\n    ]),\r\n    max_age: PropTypes.number,\r\n    setProps: PropTypes.func,\r\n};\r\n"],"sourceRoot":""}