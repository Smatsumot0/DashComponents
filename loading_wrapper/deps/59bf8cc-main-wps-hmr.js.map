{"version":3,"sources":["webpack:///./src/lib/components/LoadingWrapper.react.js"],"names":["LoadingWrapper","props","ref","React","createRef","timestamp","state","isLoading","mo","MutationObserver","mutations","mutation","isSpinner","addedNodes","setLoading","removedNodes","observe","current","childList","attributes","characterData","subtree","nodes","node","tagName","className","split","indexOf","targetClassName","Date","now","console","log","id","setProps","is_loading","setState","children","Component","defaultProps","propTypes","PropTypes","string","isRequired","func"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAmC;AACI;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AANA,IAOqBA,cAAc;EAAA;EAAA;EAC/B,wBAAYC,KAAK,EAAE;IAAA;IAAA;IACf,0BAAMA,KAAK;IACX,MAAKC,GAAG,gBAAGC,4CAAK,CAACC,SAAS,EAAE;IAC5B,MAAKC,SAAS,GAAG,CAAC;IAClB,MAAKC,KAAK,GAAG;MAACC,SAAS,EAAE;IAAK,CAAC;IAAC;EACpC;EAAC;IAAA;IAAA,OACD,6BAAoB;MAAA;MAChB,IAAIC,EAAE,GAAG,IAAIC,gBAAgB,CAAC,UAACC,SAAS,EAAK;QAAA,2CAClBA,SAAS;UAAA;QAAA;UAAhC,oDAAkC;YAAA,IAAvBC,QAAQ;YACf,IAAI,MAAI,CAACC,SAAS,CAACD,QAAQ,CAACE,UAAU,CAAC,EAAE;cACrC,MAAI,CAACC,UAAU,CAAC,IAAI,CAAC;cACrB;YACJ;YACA,IAAI,MAAI,CAACF,SAAS,CAACD,QAAQ,CAACI,YAAY,CAAC,EAAE;cACvC,MAAI,CAACD,UAAU,CAAC,KAAK,CAAC;cACtB;YACJ;UACJ;QAAC;UAAA;QAAA;UAAA;QAAA;MACL,CAAC,CAAC;MACFN,EAAE,CAACQ,OAAO,CAAC,IAAI,CAACd,GAAG,CAACe,OAAO,EAAE;QACzBC,SAAS,EAAE,IAAI;QACfC,UAAU,EAAE,IAAI;QAChBC,aAAa,EAAE,IAAI;QACnBC,OAAO,EAAE;MACb,CAAC,CAAC;IACN;EAAC;IAAA;IAAA,OACD,mBAAUC,KAAK,EAAE;MAAA,4CACMA,KAAK;QAAA;MAAA;QAAxB,uDAA0B;UAAA,IAAfC,IAAI;UACX,IAAI,CAACA,IAAI,CAACC,OAAO,EAAE;UACnB,IAAI,CAACD,IAAI,CAACE,SAAS,EAAE;UACrB,IACIF,IAAI,CAACE,SAAS,CACTC,KAAK,CAAC,GAAG,CAAC,CACVC,OAAO,CAAC,IAAI,CAAC1B,KAAK,CAAC2B,eAAe,CAAC,KAAK,CAAC,CAAC,EACjD;YACE,OAAO,IAAI;UACf;QACJ;MAAC;QAAA;MAAA;QAAA;MAAA;MACD,OAAO,KAAK;IAChB;EAAC;IAAA;IAAA,OACD,oBAAWrB,SAAS,EAAE;MAClB,IAAI,IAAI,CAACD,KAAK,CAACC,SAAS,KAAKA,SAAS,EAAE;QACpC,IAAIA,SAAS,EAAE,IAAI,CAACF,SAAS,GAAGwB,IAAI,CAACC,GAAG,EAAE,CAAC,KACtCC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC/B,KAAK,CAACgC,EAAE,EAAE,IAAI,CAAC5B,SAAS,EAAEwB,IAAI,CAACC,GAAG,EAAE,CAAC;QAC3D,IAAI,CAAC7B,KAAK,CAACiC,QAAQ,CAAC;UAACC,UAAU,EAAE5B;QAAS,CAAC,CAAC;QAC5C,IAAI,CAAC6B,QAAQ,CAAC;UAAC7B,SAAS,EAATA;QAAS,CAAC,CAAC;MAC9B;IACJ;EAAC;IAAA;IAAA,OACD,kBAAS;MACL,kBAAkC,IAAI,CAACN,KAAK;QAArCgC,EAAE,eAAFA,EAAE;QAAER,SAAS,eAATA,SAAS;QAAEY,QAAQ,eAARA,QAAQ;MAC9B,oBACI;QACI,EAAE,EAAEJ,EAAG;QACP,SAAS,EACL,kBAAkB,GAClBR,SAAS,GACT,WAAW,GACX,IAAI,CAACnB,KAAK,CAACC,SACd;QACD,GAAG,EAAE,IAAI,CAACL;MAAI,GAEbmC,QAAQ,CACP;IAEd;EAAC;EAAA;AAAA,EAjEuCC,+CAAS;AAAlB;AAoEnCtC,cAAc,CAACuC,YAAY,GAAG,CAAC,CAAC;AAEhCvC,cAAc,CAACwC,SAAS,GAAG;EACvBH,QAAQ,EAAEI,iDAAS,CAAClB,IAAI;EACxBU,EAAE,EAAEQ,iDAAS,CAACC,MAAM;EACpBjB,SAAS,EAAEgB,iDAAS,CAACC,MAAM;EAC3Bd,eAAe,EAAEa,iDAAS,CAACC,MAAM,CAACC,UAAU;EAC5CT,QAAQ,EAAEO,iDAAS,CAACG;AACxB,CAAC,C","file":"59bf8cc-main-wps-hmr.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, {Component} from 'react';\r\n\r\n/**\r\n * ExampleComponent is an example component.\r\n * It takes a property, `label`, and\r\n * displays it.\r\n * It renders an input with the property `value`\r\n * which is editable by the user.\r\n */\r\nexport default class LoadingWrapper extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.ref = React.createRef();\r\n        this.timestamp = 0;\r\n        this.state = {isLoading: false};\r\n    }\r\n    componentDidMount() {\r\n        let mo = new MutationObserver((mutations) => {\r\n            for (const mutation of mutations) {\r\n                if (this.isSpinner(mutation.addedNodes)) {\r\n                    this.setLoading(true);\r\n                    break;\r\n                }\r\n                if (this.isSpinner(mutation.removedNodes)) {\r\n                    this.setLoading(false);\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        mo.observe(this.ref.current, {\r\n            childList: true,\r\n            attributes: true,\r\n            characterData: true,\r\n            subtree: true,\r\n        });\r\n    }\r\n    isSpinner(nodes) {\r\n        for (const node of nodes) {\r\n            if (!node.tagName) continue;\r\n            if (!node.className) continue;\r\n            if (\r\n                node.className\r\n                    .split(' ')\r\n                    .indexOf(this.props.targetClassName) !== -1\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    setLoading(isLoading) {\r\n        if (this.state.isLoading !== isLoading) {\r\n            if (isLoading) this.timestamp = Date.now();\r\n            else console.log(this.props.id, this.timestamp, Date.now());\r\n            this.props.setProps({is_loading: isLoading});\r\n            this.setState({isLoading});\r\n        }\r\n    }\r\n    render() {\r\n        const {id, className, children} = this.props;\r\n        return (\r\n            <div\r\n                id={id}\r\n                className={\r\n                    'loading_wrapper ' +\r\n                    className +\r\n                    ' loading_' +\r\n                    this.state.isLoading\r\n                }\r\n                ref={this.ref}\r\n            >\r\n                {children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nLoadingWrapper.defaultProps = {};\r\n\r\nLoadingWrapper.propTypes = {\r\n    children: PropTypes.node,\r\n    id: PropTypes.string,\r\n    className: PropTypes.string,\r\n    targetClassName: PropTypes.string.isRequired,\r\n    setProps: PropTypes.func,\r\n};\r\n"],"sourceRoot":""}