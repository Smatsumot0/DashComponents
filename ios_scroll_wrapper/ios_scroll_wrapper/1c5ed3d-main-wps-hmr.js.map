{"version":3,"sources":["webpack:///./src/lib/components/IosScrollWrapper.react.js"],"names":["Outer","styled","div","Inner","IosScrollWrapper","props","outerRef","React","createRef","innerRef","isScroll","isTouch","scroll","bind","touchStart","touchEnd","timeout","setTimeout","setScrollTop","clearTimeout","target","current","console","log","scrollTop","height","getBoundingClientRect","scrollHeight","id","children","Component","defaultProps","propTypes","PropTypes","string","node","setProps","func"],"mappings":"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","file":"1c5ed3d-main-wps-hmr.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, {Component} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Outer = styled.div`\r\n    height: 1000px;\r\n    overflow: auto;\r\n`;\r\n\r\nconst Inner = styled.div``;\r\n\r\nexport default class IosScrollWrapper extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.outerRef = React.createRef();\r\n        this.innerRef = React.createRef();\r\n\r\n        this.isScroll = false;\r\n        this.isTouch = false;\r\n\r\n        // bind\r\n        this.scroll = this.scroll.bind(this);\r\n        this.touchStart = this.touchStart.bind(this);\r\n        this.touchEnd = this.touchEnd.bind(this);\r\n    }\r\n\r\n    /**\r\n     * スクロール中\r\n     */\r\n    scroll() {\r\n        if (!this.isScroll) this.isScroll = true;\r\n        // スクロール終了後300msでスクロール位置設定\r\n        const timeout = setTimeout(() => {\r\n            if (this.isScroll) {\r\n                this.isScroll = false;\r\n                if (!this.isTouch) {\r\n                    this.setScrollTop();\r\n                }\r\n            }\r\n            clearTimeout(timeout);\r\n        }, 300);\r\n    }\r\n\r\n    /**\r\n     * タッチ開始\r\n     */\r\n    touchStart() {\r\n        this.isTouch = true;\r\n    }\r\n\r\n    /**\r\n     * タッチ終了\r\n     */\r\n    touchEnd() {\r\n        this.isTouch = false;\r\n        this.setScrollTop();\r\n    }\r\n\r\n    /**\r\n     * スクロール位置設定\r\n     * @returns\r\n     */\r\n    setScrollTop() {\r\n        let target = this.outerRef.current;\r\n        console.log(target.scrollTop);\r\n        if (target.scrollTop <= 0) {\r\n            target.scrollTop = 1;\r\n            console.log('min', target.scrollTop);\r\n            return;\r\n        }\r\n        const height = target.getBoundingClientRect().height;\r\n        if (target.scrollTop + height > target.scrollHeight - 1) {\r\n            target.scrollTop = target.scrollHeight - height - 1;\r\n            console.log(\r\n                'max',\r\n                target.scrollTop,\r\n                target.scrollHeight - height - 1\r\n            );\r\n            return;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {id, children} = this.props;\r\n\r\n        return (\r\n            <Outer\r\n                id={id}\r\n                className=\"ios-scroll-outer\"\r\n                ref={this.outerRef}\r\n                onScroll={this.scroll}\r\n                onTouchStart={this.touchStart}\r\n                onTouchEnd={this.touchEnd}\r\n            >\r\n                <Inner className=\"ios-scroll-inner\" ref={this.innerRef}>\r\n                    {children}\r\n                </Inner>\r\n            </Outer>\r\n        );\r\n    }\r\n}\r\n\r\nIosScrollWrapper.defaultProps = {};\r\n\r\nIosScrollWrapper.propTypes = {\r\n    id: PropTypes.string,\r\n    children: PropTypes.node,\r\n    setProps: PropTypes.func,\r\n};\r\n"],"sourceRoot":""}