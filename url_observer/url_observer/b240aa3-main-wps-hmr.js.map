{"version":3,"sources":["webpack:///./src/lib/components/UrlObserver.react.js"],"names":["UrlObserver","props","state","href","observer","_this","MutationObserver","mutations","console","log","check","observe","document","childList","subtree","history","replaceState","window","addEventListener","disconnect","location","setProps","pathname","setState","id","Component","defaultProps","propTypes","PropTypes","string","func"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAmC;AACH;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAAA,IACqBA,WAAW;EAAA;EAAA;EAC5B,qBAAYC,KAAK,EAAE;IAAA;IAAA;IACf,2BAAMA,KAAK;IACX,OAAKC,KAAK,GAAG;MAACC,IAAI,EAAE;IAAI,CAAC;IACzB,OAAKC,QAAQ,GAAG,IAAI;IAAC;EACzB;EAAC;IAAA;IAAA,OAED,6BAAoB;MAAA;MAChB,IAAMC,KAAK,GAAG,IAAI;MAClB,IAAI,CAACD,QAAQ,GAAG,IAAIE,gBAAgB,CAAC,UAAUC,SAAS,EAAE;QACtDC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;QACvBJ,KAAK,CAACK,KAAK,EAAE;MACjB,CAAC,CAAC;MACF,IAAI,CAACN,QAAQ,CAACO,OAAO,CAACC,QAAQ,EAAE;QAACC,SAAS,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAI,CAAC,CAAC;MAEjEC,OAAO,CAACC,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;MACtCC,MAAM,CAACC,gBAAgB,CAAC,UAAU,EAAE,YAAM;QACtCV,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;QACvB,MAAI,CAACC,KAAK,EAAE;MAChB,CAAC,CAAC;IACN;EAAC;IAAA;IAAA,OAED,gCAAuB;MACnB,IAAI,IAAI,CAACN,QAAQ,EAAE;QACf,IAAI,CAACA,QAAQ,CAACe,UAAU,EAAE;MAC9B;IACJ;EAAC;IAAA;IAAA,OAED,iBAAQ;MACJ,IAAI,IAAI,CAACjB,KAAK,CAACC,IAAI,KAAKiB,QAAQ,CAACjB,IAAI,EAAE;QACnCK,OAAO,CAACC,GAAG,CAAC,KAAK,EAAE,IAAI,CAACP,KAAK,CAACC,IAAI,GAAG,MAAM,GAAGiB,QAAQ,CAACjB,IAAI,CAAC;QAC5D,IAAI,CAACF,KAAK,CAACoB,QAAQ,CAAC;UAChBC,QAAQ,EAAEF,QAAQ,CAACE;QACvB,CAAC,CAAC;QACF,IAAI,CAACC,QAAQ,CAAC;UACVpB,IAAI,EAAEiB,QAAQ,CAACjB;QACnB,CAAC,CAAC;MACN;IACJ;EAAC;IAAA;IAAA,OAED,kBAAS;MACL,oBAAO;QAAK,EAAE,EAAE,IAAI,CAACF,KAAK,CAACuB;MAAG,EAAO;IACzC;EAAC;EAAA;AAAA,EA1CoCC,+CAAS;AAAlB;AA6ChCzB,WAAW,CAAC0B,YAAY,GAAG,CAAC,CAAC;AAE7B1B,WAAW,CAAC2B,SAAS,GAAG;EACpBH,EAAE,EAAEI,iDAAS,CAACC,MAAM;EACpBP,QAAQ,EAAEM,iDAAS,CAACC,MAAM;EAC1BR,QAAQ,EAAEO,iDAAS,CAACE;AACxB,CAAC;;AAED,8B","file":"b240aa3-main-wps-hmr.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport {Component} from 'react';\r\n\r\n/**\r\n * ExampleComponent is an example component.\r\n * It takes a property, `label`, and\r\n * displays it.\r\n * It renders an input with the property `value`\r\n * which is editable by the user.\r\n */\r\n// const UrlObserver = (props) => {\r\n//     const {id, pathname, setProps} = this.props;\r\n//     useEffect(()=>{\r\n\r\n//     })\r\n//     return <div id={this.props.id}></div>;\r\n// };\r\nexport default class UrlObserver extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {href: null};\r\n        this.observer = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const _this = this;\r\n        this.observer = new MutationObserver(function (mutations) {\r\n            console.log('observer');\r\n            _this.check();\r\n        });\r\n        this.observer.observe(document, {childList: true, subtree: true});\r\n\r\n        history.replaceState(null, null, null);\r\n        window.addEventListener('popstate', () => {\r\n            console.log('popstate');\r\n            this.check();\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.observer) {\r\n            this.observer.disconnect();\r\n        }\r\n    }\r\n\r\n    check() {\r\n        if (this.state.href !== location.href) {\r\n            console.log('URL', this.state.href + ' => ' + location.href);\r\n            this.props.setProps({\r\n                pathname: location.pathname,\r\n            });\r\n            this.setState({\r\n                href: location.href,\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <div id={this.props.id}></div>;\r\n    }\r\n}\r\n\r\nUrlObserver.defaultProps = {};\r\n\r\nUrlObserver.propTypes = {\r\n    id: PropTypes.string,\r\n    pathname: PropTypes.string,\r\n    setProps: PropTypes.func,\r\n};\r\n\r\n// export default UrlObserver;\r\n"],"sourceRoot":""}