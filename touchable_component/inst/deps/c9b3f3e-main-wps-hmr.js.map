{"version":3,"sources":["webpack:///./src/lib/components/TouchableComponent.react.js"],"names":["TouchableComponent","props","minDistance","maxTime","state","active","isActive","setState","e","touches","rect","target","getBoundingClientRect","t","push","x","clientX","left","y","clientY","Up","startPos","targetTouches","timeStamp","endPos","time","console","log","direction","distance","Math","abs","setProps","swipe","swipe_end","children","id","className","updateActive","swipeStart","start_timestamp","swipeEnd","end_timestamp","swipeMove","touchData","Component","defaultProps","propTypes","PropTypes","node","string","n_clicks","number","func"],"mappings":"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","file":"c9b3f3e-main-wps-hmr.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, {Component} from 'react';\r\n/**\r\n * ExampleComponent is an example component.\r\n * It takes a property, `label`, and\r\n * displays it.\r\n * It renders an input with the property `value`\r\n * which is editable by the user.\r\n */\r\nexport default class TouchableComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.minDistance = 100;\r\n        this.maxTime = 150;\r\n        this.state = {active: false};\r\n    }\r\n    updateActive(isActive) {\r\n        this.setState({active: isActive});\r\n    }\r\n    touchData(e) {\r\n        let touches = [];\r\n        const rect = e.target.getBoundingClientRect();\r\n        for (let t of e.touches) {\r\n            touches.push({x: t.clientX - rect.left, y: t.clientY - rect.Up});\r\n        }\r\n        return touches;\r\n    }\r\n    swipeStart(e) {\r\n        this.startPos = {\r\n            x: e.targetTouches[0].clientX,\r\n            y: e.targetTouches[0].clientY,\r\n            timeStamp: e.timeStamp,\r\n        };\r\n    }\r\n    swipeMove(e) {\r\n        this.endPos = {\r\n            x: e.targetTouches[0].clientX,\r\n            y: e.targetTouches[0].clientY,\r\n        };\r\n    }\r\n    swipeEnd(e) {\r\n        if (!this.endPos || !this.startPos) return;\r\n\r\n        const x = this.endPos.x - this.startPos.x;\r\n        const y = this.endPos.y - this.startPos.y;\r\n        const time = e.timeStamp - this.startPos.timeStamp;\r\n\r\n        this.startPos = null;\r\n        this.endPos = null;\r\n\r\n        // 最大時間以上の場合 何もしない\r\n        if (time > this.maxTime) {\r\n            console.log(\r\n                '--- TOUCHABLE COMPONENT MAX TIME',\r\n                time + ' > ' + this.maxTime\r\n            );\r\n            return;\r\n        }\r\n\r\n        // スワイプの方向\r\n        let direction;\r\n        let distance;\r\n        if (Math.abs(x) > Math.abs(y)) {\r\n            direction = x < 0 ? 'left' : 'right';\r\n            distance = Math.abs(x);\r\n        } else {\r\n            direction = y < 0 ? 'up' : 'down';\r\n            distance = Math.abs(y);\r\n        }\r\n\r\n        // 最小距離以下の場合 何もしない\r\n        if (distance < this.minDistance) {\r\n            console.log(\r\n                '--- TOUCHABLE COMPONENT MIN DISTANCE',\r\n                distance + ' > ' + this.minDistance\r\n            );\r\n            return;\r\n        }\r\n        console.log('--- TOUCHABLE COMPONENT SWIPE DIRECTION', direction);\r\n        this.props.setProps({swipe: direction, swipe_end: e.timeStamp});\r\n    }\r\n    render() {\r\n        const {children, id, className, setProps} = this.props;\r\n        return (\r\n            <div\r\n                id={id}\r\n                className={className + (this.state.active ? ' active' : '')}\r\n                onTouchStart={(e) => {\r\n                    this.updateActive(true);\r\n                    this.swipeStart(e);\r\n                    setProps({start_timestamp: e.timeStamp});\r\n                }}\r\n                onTouchEnd={(e) => {\r\n                    this.updateActive(false);\r\n                    this.swipeEnd(e);\r\n                    setProps({end_timestamp: e.timeStamp});\r\n                }}\r\n                onTouchMove={(e) => {\r\n                    this.swipeMove(e);\r\n                    setProps({touches: this.touchData(e)});\r\n                }}\r\n                onClick={(e) => setProps({end_timestamp: e.timeStamp})}\r\n                // style={{width: '500px', height: '500px', background: 'red'}}\r\n            >\r\n                {children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nTouchableComponent.defaultProps = {};\r\n\r\nTouchableComponent.propTypes = {\r\n    children: PropTypes.node,\r\n    id: PropTypes.string,\r\n    className: PropTypes.string,\r\n    n_clicks: PropTypes.number,\r\n    setProps: PropTypes.func,\r\n};\r\n"],"sourceRoot":""}